# README

## 一级分类 (Type)

> 参考了主流的 Conventional Commits 进行一级分类，主要是参考了 Angular Convention。

| 分类      | 类型描述                                                        |
| --------- | --------------------------------------------------------------- |
| style     | 对代码风格的变更，如增删空白符、修改代码缩进、代码格式化等      |
| docs      | 与文档相关的代码变更                                            |
| test      | 添加新测试或删除、更正已有测试等                                |
| build     | 会影响构建系统（如 Gulp、Broccoli、NPM）或者外部依赖的代码变更  |
| cicd      | 对 CICD 系统（如 Travis、Circle）的配置文件或配置脚本的代码变更 |
| fix       | 修复或预防代码缺陷、漏洞等                                      |
| feat      | 对代码添加新的功能                                              |
| refactor  | 与代码重构相关的代码变更                                        |
| ~~perf~~  | ~~会影响代码性能的代码变更~~                                    |
| ~~chore~~ | ~~不满足上述类型的其他所有代码变更~~                            |

> Note: 按照提交 git commit 的最佳实践，每个 commit 需要遵循最小原则，因此每个 commit 进对应上述一级分类的一个类型。但现实情况中，开发者通常会在同一个 commit 中混合多种类型的代码修改，在这种情况下，我们推荐仅考虑该 commit 中最主要的代码修改，并按照上述一级分类的顺序一一比对。

## 二级分类 v0.1.0 (Subtype)

> 以下分类主要参考了 “EMSE20/An empirical investigation of relevant changes and automation needs in modern code review” 文章中的对 code review activity 的分类。

### feat

| 分类 | 类型描述                                                         |
| ---- | ---------------------------------------------------------------- |
| E1   | 检查函数：例如，在函数调用时需要检查返回值是否有效且没有发生错误 |
| E2   | 检查变量：例如，需要检查变量                                     |
| E3   | 检查用户输入：例如，需要验证用户输入                             |
| Ex   | 新功能：其他新功能                                               |

### fix

| 分类 | 类型描述                                                                                          |
| ---- | ------------------------------------------------------------------------------------------------- |
| I1   | 函数调用：例如，对系统或库的调用不正确或缺失                                                      |
| I2   | 参数：函数调用或其他交互中使用了不正确或缺失的参数                                                |
| I3   | 比较：比较语句中的错误                                                                            |
| I4   | 计算：计算产生错误的结果                                                                          |
| I5   | 错误的位置：正确的操作被执行，但执行时间过早或过晚                                                |
| I6   | 算法/性能：使用效率低下的算法                                                                     |
| I7   | 变量初始化：变量在使用之前未初始化。未初始化的变量可能包含任何值，并使用此类变量会产生错误        |
| I8   | 内存管理：例如，处理系统内存时发生错误、显示调用 GC                                               |
| I9   | 数据与资源操作：与操作或使用数据或其他资源相关的缺陷                                              |
| I10  | 安全性：与应用程序/软件的安全性相关的问题                                                         |
| I11  | 并发性：与并发性相关的问题                                                                        |
| I12  | 完整性：部分实现的功能                                                                            |
| I13  | GUI：与用户界面代码相关的缺陷，涉及用户界面的一致性以及在每种情况下向用户提供的选项。             |
| I14  | 检查外部代码/连锁效应：需要检查审查范围之外的应用程序代码，因为它可能包含基于当前审查的不正确代码 |
| I15  | 语法：修复语法错误                                                                                |
| I16  | 拼写：修复拼写错误                                                                                |
| Ix   | 其他：其他与问题修复相关的代码变更                                                                |

### refactor

| 分类 | 类型描述                                                                                                                     |
| ---- | ---------------------------------------------------------------------------------------------------------------------------- |
| R1   | 语义重复：具有相似意图但在语法上实现不同的代码结构                                                                           |
| R2   | 语义无效代码：执行但没有任何有意义作用或对结果没有影响的代码片段                                                             |
| R3   | 更改功能：例如，因使用旧的或已弃用的函数而将函数调用更改为另一个函数                                                         |
| R4   | 标准编码约定：例如，在错误消息中使用异常而不是返回值，在魔术数字中使用常量，使用内置数据结构而不是自己的实现等               |
| R5   | 字符串（用语）：字符串内容、组成不好的问题                                                                                   |
| R6   | 日志记录：为方法添加、删除记录结果或错误的能力                                                                               |
| R7   | 导入：错误、缺失或未使用的导入语句的问题                                                                                     |
| R8   | 移动功能：例如，将类、函数、函数部分或其他功能元素移动到不同的类、文件、模块或未知                                           |
| R9   | 长子程序/复杂代码/简化：将长而复杂的函数拆分为多个函数或重组或重写实现以使其更易理解                                         |
| R10  | 重复/冗余/无效代码：删除重复的代码或无用的代码或永远不会到达和执行的代码                                                     |
| R11  | 一致性：意味着需要保持代码一致性，类似的代码元素以类似的方式操作，更或多或少对称。例如，类似的任务在类似的类中应有类似的实现 |
| R12  | 架构变更：代码审查通常会导致对系统架构的更改，例如将接口划分为两个不同的接口、引入抽象或引入设计模式                         |
| R13  | 重命名：重新命名类、方法、字段等等                                                                                           |
| Rx   | 其他：其他与重构相关的代码变更                                                                                               |

### style

| 分类 | 类型描述                                       |
| ---- | ---------------------------------------------- |
| S1   | 括号和花括号：例如，在条件分支之后只有一条语句 |
| S2   | 缩进：例如，代码的一致缩进、删除或增加缩进     |
| S3   | 空白行：空白行过多或过少，或者行分割错误       |
| S4   | 行过长：代码语句过长，超过特定字符数           |
| S5   | 空格使用：代码中空格的使用情况                 |
| Sx   | 其他：其他与代码风格相关的代码变更             |

### test

| 分类 | 类型描述                   |
| ---- | -------------------------- |
| T1   | 测试：与测试相关的代码变更 |

### docs

| 分类 | 类型描述                                                                                                                |
| ---- | ----------------------------------------------------------------------------------------------------------------------- |
| D1   | 命名：例如，文档中与项目的命名政策不符的软件元素（如方法、类、变量等）名称的问题                                        |
| D2   | 注释：与注释相关。例如，注释错误放置、添加新注释、修改已有注释、删除注释、缺少或错误的 Javadoc 等（包括 TODO 和 FIXME） |
| D3   | 许可证头部：源代码文件中缺失或错误的许可证头部的问题                                                                    |
| D4   | 拼写错误：文档中的拼写错误                                                                                              |
| Dx   | 其他：其他与文档相关的代码变更                                                                                          |

### build

| 分类 | 类型描述                       |
| ---- | ------------------------------ |
| B1   | 构建：与构建系统相关的代码变更 |

### cicd

| 分类 | 类型描述                                                                                                           |
| ---- | ------------------------------------------------------------------------------------------------------------------ |
| C1   | 持续集成/持续交付配置：关于持续集成或持续交付流程设置的配置文件更改                                                |
| C2   | 自动静态分析工具配置：项目中用到的 Linters、Checkers、Recommenders 的配置更改（例如 Checkstyle、PMD、FindBugs 等） |
| C3   | 特定语言或框架：对所使用编程语言的特定文件的更改。例如 Java 的 MANIFEST 文件                                       |
| C4   | 运行时配置：例如，docker 配置、ansible playbook、交付配置等                                                        |
| Cx   | 其他：其他与持续集成/部署相关的代码变更                                                                            |

## 二级分类 v0.2.0 (Subtype)

根据 v0.1.0 进行优化，删除不常用和不合理的二级分类，合并一些分类，并添加一些缺失的分类，最后用 GPT-4 对该分类体系进行评价并进行优化。

> 现在我要为用户使用 git 提交的 commit message 进行分类，我的分类需要满足大多数用户，也就是我需要一些大多数用户都会用到的分类，对于只有少部分用户才会用到的分类，均分类到“其他”里。
>
> 为此，我参考了 Angular 项目的分类方式，将一级分类分为了 feat (Feature), fix, refactor, style, test, build, cicd, docs 八类。
>
> 我还需要为每个一级分类生成一些大多数用户都会用到的二级分类，下面是我的二级分类，请你帮我看一下，这样的分类是否合理，告诉我里面哪些二级分类是用户不太常用的，还有哪些是用户常用但我缺失了的：

### feat

| 分类 | 类型描述                                                         |
| ---- | ---------------------------------------------------------------- |
| E1   | 元素：新增新的软件元素，如模块、类、方法、函数等，以对应新的功能 |
| E2   | 日志：为函数添加记录结果或错误的能力                             |
| E3   | 性能：使用性能更好的算法、数据结构等替换旧的算法、数据结构       |
| E4   | 安全：与安全性相关的特性加强，如增强认证、授权、加密等           |
| Ex   | 其他：其他与 feat 相关的代码变更                                 |

### fix

| 分类 | 类型描述                                                                                                                                              |
| ---- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| I1   | 语法：修复代码中的语法错误（如添加缺失的括号、分号等）                                                                                                |
| I2   | 拼写：修复代码中的拼写错误（如 tyep 修复为 type）                                                                                                     |
| I3   | 检查：增强代码检查以防止/修复 miss-check 错误，如增强用户输入检查以防止/修复 XSS 等，添加空值检查以防止/修复空指针/空引用错误，添加函数的返回值检查等 |
| I4   | 初始化：修复变量、字段等未初始化的问题                                                                                                                |
| I5   | 并发：修复与并发相关的问题，如数据竞争                                                                                                                |
| I6   | 内存：修复与内存相关的问题，如内存分配、内存泄漏、内存溢出                                                                                            |
| Ix   | 其他：其他与 fix 相关的代码变更                                                                                                                       |

### refactor

| 分类 | 类型描述                                                                                                                                   |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| R1   | 代码提取：将相似、语义重复的代码片段提取出来（如提取成公共的类、函数、方法等）以减少重复代码，或使用已存在的公共方法取代现有的相似代码片段 |
| R2   | 死代码删除：删除无效的（没有任何有意义或对结果没有影响的）代码片段                                                                         |
| R3   | 代码移动：例如，将整体或部分代码（如类、函数、方法）移动到其他位置（如不同的类、文件、模块）                                               |
| R4   | 代码简化：将长而复杂的类、函数等拆分为多个函数或重组或重写实现以使其更易理解                                                               |
| R5   | 重命名：重新命名类、方法、字段等                                                                                                           |
| R6   | 代码一致：修改代码名称、实现等以与其他类似代码保持一致                                                                                     |
| R7   | 新旧替换：废弃一些代码（如标记为 @deprecated），转而使用新代码                                                                             |
| R8   | 导入修改：删除错误或未使用的导入语句，或添加缺失的导入语句                                                                                 |
| Rx   | 其他：其他与重构相关的代码变更                                                                                                             |

### style

| 分类 | 类型描述                                                                                                                                                                                      |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| S1   | 括号：修改括号（圆括号、方括号、花括号等）的对齐方式                                                                                                                                          |
| S2   | 缩进：增加或删除缩进                                                                                                                                                                          |
| S3   | 空白行：增删空白行                                                                                                                                                                            |
| S4   | 行分割：分割过长的代码行或修正代码行的分割方式                                                                                                                                                |
| S5   | 空格：增删代码中的空格                                                                                                                                                                        |
| Sx   | 其他：其他与 style 相关的代码变更                                                                                                                                                             |
| Sx   | 风格：与代码风格相关而不会影响代码实际效果的代码变更，如修改括号（圆括号、方括号、花括号等）的对齐方式，增加或删除缩进，增删空白行，增删代码中 的空格、分割过长的代码行或修正代码行的分割方式 |

### test

| 分类 | 类型描述                                                                                                                                     |
| ---- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| T1   | 新增测试：新增一个/些测试                                                                                                                    |
| T2   | 删除测试：删除已有的测试或标记某个/些测试不再使用                                                                                            |
| T3   | 修正测试：修正已有的测试                                                                                                                     |
| Tx   | 其他：其他与 test 相关的代码变更                                                                                                             |
| Tx   | 测试：与测试代码相关的代码变更，如新增一些测试，删除已有的测试或标记某些测试不再使用，修正已有测试的测试流程、测试断言，调整代码覆盖率工具等 |

### docs

| 分类 | 类型描述                                                                                                                     |
| ---- | ---------------------------------------------------------------------------------------------------------------------------- |
| D1   | 命名：修正文档中与代码中不一致的软件元素（如方法、类、变量）名称                                                             |
| D2   | 注释：与注释相关的代码变更，包括 TODO 和 FIXME（如，注释错误放置、添加新注释、修改已有注释、删除注释、缺少或错误的 Javadoc） |
| D3   | 拼写：修正文档中的拼写错误                                                                                                   |
| Dx   | 其他：其他与文档相关的代码变更                                                                                               |

### build

| 分类 | 类型描述                                                     |
| ---- | ------------------------------------------------------------ |
| B1   | 依赖：与依赖管理相关的变更（如更新、降级、删除、添加依赖等） |
| Bx   | 其他：与构建系统相关的代码变更                               |

### cicd

| 分类 | 类型描述                                                                                                            |
| ---- | ------------------------------------------------------------------------------------------------------------------- |
| C1   | 自动分析：CICD 流水线中用到的自动分析工具如 linters、checkers、analyzers 的配置更改（如 Checkstyle、PMD、FindBugs） |
| C2   | 镜像：与镜像构建、部署相关的变更（如 docker、k8s）                                                                  |
| C3   | 部署：与项目部署相关的代码变更，如增删预发、生产部署步骤，修改部署脚本等                                            |
| Cx   | 其他：其他与持续集成、持续部署相关的代码变更                                                                        |
